version: "3.9"
services:
  data_collector:
    build: 
      context: containers/data_collector
      dockerfile: Dockerfile
    volumes:
      - type: volume
        source: .
        target: /bigipreport
  frontend:
    depends_on: 
      - data_collector
    build:
      context: containers/nginx
      dockerfile: Dockerfile
    volumes:
      - type: volume
        source: .
        target: /bigipreport
        read_only: true
      - type: volume
        source: underlay
        target: /usr/share/nginx/html
        read_only: true
volumes:
  underlay:
  .: